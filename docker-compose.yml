---
version: '3.8'

services:
  docker-openvpn-client:
    image: jsloan117/docker-openvpn-client
    cap_add:
      - NET_ADMIN
    restart: always
    dns:
      - 1.1.1.1
      - 1.0.0.1
    volumes:
      - /etc/localtime:/etc/localtime:ro
      - openvpn_data:/etc/openvpn
    environment:
      - OPENVPN_USERNAME=username
      - OPENVPN_PASSWORD=password
      - OPENVPN_PROVIDER=vpnprovider
      - OPENVPN_OPTS=--user abc --group abc --auth-nocache --inactive 3600 --ping 10 --ping-exit 60
      - OPENVPN_CONFIG=config_without_ovpn_extension
      - LOCAL_NETWORK=192.168.0.0/16
      - CREATE_TUN_DEVICE=true
      - ENABLE_UFW=false
      - UFW_ALLOW_GW_NET=false
      - UFW_EXTRA_PORTS=
      - HEALTH_CHECK_HOST=google.com
      - S6_CMD_WAIT_FOR_SERVICES_MAXTIME=60000
    healthcheck:
      test: [CMD, /etc/scripts/healthcheck.sh]
      interval: 1m

volumes:
  openvpn_data:
